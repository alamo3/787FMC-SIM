/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author omer
 */

import java.io.*;
import java.util.*;
import java.lang.*;

import java.io.File;
import java.io.IOException;
import com.maxmind.geoip2.DatabaseReader;
import com.maxmind.geoip2.exception.GeoIp2Exception;
import com.maxmind.geoip2.model.CityResponse;
import com.maxmind.geoip2.record.City;
import com.maxmind.geoip2.record.Country;
import com.maxmind.geoip2.record.Location;
import com.maxmind.geoip2.record.Postal;
import com.maxmind.geoip2.record.Subdivision;
import java.net.*;





public class findGpsPosition {
  
  public static void main(String []args) throws GeoIp2Exception{
    
    findGpsPosition obj1=new findGpsPosition();
 String[] ip=obj1.getLocation();
  
 // System.out.println(ip[0]);
  //System.out.println(ip[1]);
  
  
}
  
    String currentip="";
    public void getIP(){

try
        {
            URL url_name = new URL("http://bot.whatismyipaddress.com");
 
            BufferedReader sc =
            new BufferedReader(new InputStreamReader(url_name.openStream()));
 
            // reads system IPAddress
            currentip = sc.readLine().trim();
        }catch (Exception ex){}

}
    
    public String[] getLocation() throws GeoIp2Exception {
        getIP();
        String dblocation="GeoLiteCity.dat";
        File db=new File("GeoLiteCity.dat");
        String[] coords=new String[2];
                try{
DatabaseReader reader = new DatabaseReader.Builder(db).build();
 
InetAddress ipAddressGet = InetAddress.getByName("128.101.101.101");
CityResponse response = reader.city(ipAddressGet);
Location location = response.getLocation();

System.out.println(location.getLatitude());

coords[0]=Double.toString(location.getLatitude());
coords[1]=Double.toString(location.getLongitude());
                }catch(IOException ex){}
                
 
return coords;
  }
}
